import{_ as A,c,a as t,t as r,n as g,o as n,f as v,b as S,e as p,F as b,k as C,r as T,l as _,g as j,i as y,d as f,v as x,m as D,q as M,s as k,x as N}from"./C50InBbU.js";import{useAuthStore as w}from"./CY8Q5OdD.js";const V={name:"StatCard",props:{title:{type:String,required:!0},value:{type:[Number,String],required:!0},icon:{type:String,required:!0},color:{type:String,default:"blue",validator:s=>["blue","green","purple","yellow","red"].includes(s)},loading:{type:Boolean,default:!1}},computed:{formattedValue(){return typeof this.value=="number"?this.value.toLocaleString("fr-FR"):this.value}}},z={class:"stat-card"},B={class:"stat-card-content"},R={class:"stat-info"},I={class:"stat-label"},F={key:0,class:"stat-loading"},U={key:1,class:"stat-value"},L={key:0,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},q={key:1,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H={key:2,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},P={key:3,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={key:4,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function $(s,e,o,h,a,i){return n(),c("div",z,[t("div",B,[t("div",R,[t("p",I,r(o.title),1),o.loading?(n(),c("div",F,e[0]||(e[0]=[t("div",{class:"loading-bar"},null,-1)]))):(n(),c("p",U,r(i.formattedValue),1))]),t("div",{class:g(`stat-icon ${o.color}`)},[o.icon==="users"?(n(),c("svg",L,e[1]||(e[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)]))):o.icon==="calendar"?(n(),c("svg",q,e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)]))):o.icon==="trending-up"?(n(),c("svg",H,e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):o.icon==="chart-bar"?(n(),c("svg",P,e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)]))):(n(),c("svg",O,e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},null,-1)])))],2)])])}const Y=A(V,[["render",$],["__scopeId","data-v-e6733c9f"]]),X={name:"StatsSection",components:{StatCard:Y},props:{stats:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}}},G={class:"stats-section"},J={class:"stats-grid"},Q={key:0,class:"empty-state"},W={key:1,class:"stats-details"},K={class:"stats-card"},Z={class:"stats-list"},tt={class:"status-label"},et={class:"progress-container"},st={class:"progress-bar"},ot={class:"status-count"},at={class:"stats-card"},it={class:"stats-list"},lt={class:"status-label"},nt={class:"progress-container"},ct={class:"progress-bar"},rt={class:"status-count"},dt={key:2,class:"metrics-grid"},ut={class:"metric-card"},vt={class:"metric-content"},mt={class:"metric-info"},ht={class:"metric-value"},pt={class:"metric-card"},gt={class:"metric-content"},ft={class:"metric-info"},kt={class:"metric-value"},bt={class:"metric-card"},Ct={class:"metric-content"},yt={class:"metric-info"},_t={class:"metric-value"};function wt(s,e,o,h,a,i){const u=T("StatCard");return n(),c("div",G,[t("div",J,[S(u,{title:"Total Contacts",value:o.stats.totalContacts||0,icon:"users",color:"blue",loading:o.loading},null,8,["value","loading"]),S(u,{title:"Aujourd'hui",value:o.stats.todayContacts||0,icon:"calendar",color:"green",loading:o.loading},null,8,["value","loading"]),S(u,{title:"Cette semaine",value:o.stats.weekContacts||0,icon:"trending-up",color:"purple",loading:o.loading},null,8,["value","loading"]),S(u,{title:"Ce mois",value:o.stats.monthContacts||0,icon:"chart-bar",color:"yellow",loading:o.loading},null,8,["value","loading"])]),!o.loading&&(!o.stats.totalContacts||o.stats.totalContacts===0)?(n(),c("div",Q,e[0]||(e[0]=[p('<div class="empty-icon" data-v-0776124a><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0776124a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-0776124a></path></svg></div><h3 class="empty-title" data-v-0776124a>Aucune donn√©e disponible</h3><p class="empty-description" data-v-0776124a> Les statistiques appara√Ætront ici d√®s que vous aurez des contacts. </p>',3)]))):v("",!0),!o.loading&&o.stats.totalContacts>0?(n(),c("div",W,[t("div",K,[e[1]||(e[1]=t("h3",{class:"stats-card-title"},"R√©partition par statut",-1)),t("div",Z,[(n(!0),c(b,null,C(o.stats.byStatus||[],m=>(n(),c("div",{key:m.status,class:"stats-item"},[t("span",tt,r(m.status),1),t("div",et,[t("div",st,[t("div",{class:"progress-fill blue",style:_({width:`${m.count/o.stats.totalContacts*100}%`})},null,4)]),t("span",ot,r(m.count),1)])]))),128))])]),t("div",at,[e[2]||(e[2]=t("h3",{class:"stats-card-title"},"Sources principales",-1)),t("div",it,[(n(!0),c(b,null,C(o.stats.topSources||[],m=>(n(),c("div",{key:m.source,class:"stats-item"},[t("span",lt,r(m.source),1),t("div",nt,[t("div",ct,[t("div",{class:"progress-fill green",style:_({width:`${m.count/o.stats.totalContacts*100}%`})},null,4)]),t("span",rt,r(m.count),1)])]))),128))])])])):v("",!0),!o.loading&&o.stats.totalContacts>0?(n(),c("div",dt,[t("div",ut,[t("div",vt,[t("div",mt,[e[3]||(e[3]=t("p",{class:"metric-label"},"Taux de conversion",-1)),t("p",ht,r(o.stats.conversionRate||"0")+"% ",1)]),e[4]||(e[4]=t("div",{class:"metric-icon blue"},[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1))])]),t("div",pt,[t("div",gt,[t("div",ft,[e[5]||(e[5]=t("p",{class:"metric-label"},"Visiteurs uniques",-1)),t("p",kt,r(o.stats.uniqueVisitors||"0"),1)]),e[6]||(e[6]=t("div",{class:"metric-icon green"},[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])],-1))])]),t("div",bt,[t("div",Ct,[t("div",yt,[e[7]||(e[7]=t("p",{class:"metric-label"},"Dur√©e moy. session",-1)),t("p",_t,r(o.stats.avgSessionDuration||"0")+"min ",1)]),e[8]||(e[8]=t("div",{class:"metric-icon purple"},[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])])):v("",!0)])}const St=A(X,[["render",wt],["__scopeId","data-v-0776124a"]]),At={name:"ContactDetailModal",props:{contact:{type:Object,required:!0}},emits:["close","update-status"],mounted(){document.body.style.overflow="hidden"},beforeUnmount(){document.body.style.overflow=""},methods:{getStatusClass(s){return{"Non trait√©":"status-pending",Trait√©:"status-completed",Relanc√©:"status-follow-up"}[s]||"status-default"},formatDate(s){try{return new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(s))}catch{return s}},getBrowserInfo(s){return s?s.includes("Chrome")?"Chrome":s.includes("Firefox")?"Firefox":s.includes("Safari")&&!s.includes("Chrome")?"Safari":s.includes("Edge")?"Edge":s.includes("Opera")?"Opera":"Autre":"Inconnu"},sendEmail(){console.log("Envoyer email √†:",this.contact.email),this.$emit("close")}}},Et={class:"modal-overlay"},Tt={class:"modal-content"},xt={class:"modal-header"},Mt={class:"modal-body"},Dt={class:"info-section"},jt={class:"info-item"},Nt={class:"info-value"},Vt={class:"info-item"},zt={class:"info-value"},Bt={key:0,class:"info-item"},Rt={class:"info-value"},It={class:"info-item"},Ft={class:"source-badge"},Ut={class:"info-item"},Lt=["value"],qt={class:"metadata-section"},Ht={class:"info-item"},Pt={class:"info-value"},Ot={key:0,class:"info-item"},$t={class:"info-value"},Yt={key:1,class:"info-item"},Xt={class:"info-value"},Gt={key:2,class:"info-item"},Jt={class:"info-value mono"},Qt={key:3,class:"info-item"},Wt=["title"],Kt={key:4,class:"info-item"},Zt=["title"],te={class:"modal-footer"};function ee(s,e,o,h,a,i){return n(),c("div",Et,[t("div",Tt,[t("div",xt,[e[5]||(e[5]=t("h3",{class:"modal-title"},"D√©tails du contact",-1)),t("button",{onClick:e[0]||(e[0]=u=>s.$emit("close")),class:"close-button"},e[4]||(e[4]=[t("svg",{class:"close-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Mt,[t("div",Dt,[t("div",jt,[e[6]||(e[6]=t("label",{class:"info-label"},"Nom",-1)),t("p",Nt,r(o.contact.firstName),1)]),t("div",Vt,[e[7]||(e[7]=t("label",{class:"info-label"},"Email",-1)),t("p",zt,r(o.contact.email),1)]),o.contact.phone?(n(),c("div",Bt,[e[8]||(e[8]=t("label",{class:"info-label"},"T√©l√©phone",-1)),t("p",Rt,r(o.contact.phone),1)])):v("",!0),t("div",It,[e[9]||(e[9]=t("label",{class:"info-label"},"Source",-1)),t("span",Ft,r(o.contact.source),1)]),t("div",Ut,[e[11]||(e[11]=t("label",{class:"info-label"},"Statut",-1)),t("select",{value:o.contact.status,onChange:e[1]||(e[1]=u=>s.$emit("update-status",u.target.value)),class:g(["status-select",i.getStatusClass(o.contact.status)])},e[10]||(e[10]=[t("option",{value:"Non trait√©"},"Non trait√©",-1),t("option",{value:"Trait√©"},"Trait√©",-1),t("option",{value:"Relanc√©"},"Relanc√©",-1)]),42,Lt)])]),t("div",qt,[t("div",Ht,[e[12]||(e[12]=t("label",{class:"info-label"},"Date d'inscription",-1)),t("p",Pt,r(i.formatDate(o.contact.createdAt)),1)]),o.contact.updatedAt!==o.contact.createdAt?(n(),c("div",Ot,[e[13]||(e[13]=t("label",{class:"info-label"},"Derni√®re modification",-1)),t("p",$t,r(i.formatDate(o.contact.updatedAt)),1)])):v("",!0),o.contact.countryCode?(n(),c("div",Yt,[e[14]||(e[14]=t("label",{class:"info-label"},"Pays",-1)),t("p",Xt,r(o.contact.countryCode),1)])):v("",!0),o.contact.ipAddress&&o.contact.ipAddress!=="unknown"?(n(),c("div",Gt,[e[15]||(e[15]=t("label",{class:"info-label"},"Adresse IP",-1)),t("p",Jt,r(o.contact.ipAddress),1)])):v("",!0),o.contact.userAgent?(n(),c("div",Qt,[e[16]||(e[16]=t("label",{class:"info-label"},"Navigateur",-1)),t("p",{class:"info-value truncated",title:o.contact.userAgent},r(i.getBrowserInfo(o.contact.userAgent)),9,Wt)])):v("",!0),o.contact.referrer?(n(),c("div",Kt,[e[17]||(e[17]=t("label",{class:"info-label"},"R√©f√©rent",-1)),t("p",{class:"info-value truncated",title:o.contact.referrer},r(o.contact.referrer),9,Zt)])):v("",!0)])]),t("div",te,[t("button",{onClick:e[2]||(e[2]=u=>s.$emit("close")),class:"btn btn-secondary"}," Fermer "),t("button",{onClick:e[3]||(e[3]=(...u)=>i.sendEmail&&i.sendEmail(...u)),class:"btn btn-primary"}," Envoyer un email ")])])])}const se=A(At,[["render",ee],["__scopeId","data-v-65055962"]]),oe={name:"SaveTemplateModal",props:{emailData:{type:Object,required:!0}},emits:["close","save"],mounted(){document.body.style.overflow="hidden"},beforeUnmount(){document.body.style.overflow=""},data(){return{templateName:"",templateDescription:""}},methods:{saveTemplate(){this.templateName.trim()&&this.$emit("save",{name:this.templateName.trim(),description:this.templateDescription.trim()})}}},ae={class:"modal-overlay"},ie={class:"modal-container"},le={class:"modal-content"},ne={class:"modal-header"},ce={class:"form-group"},re={class:"form-group"},de={class:"preview-section"},ue={class:"preview-content"},ve={class:"preview-subject"},me={class:"preview-message"},he={class:"modal-footer"},pe=["disabled"];function ge(s,e,o,h,a,i){return n(),c("div",ae,[t("div",ie,[t("div",le,[t("div",ne,[e[6]||(e[6]=t("h3",{class:"modal-title"},"Sauvegarder le template",-1)),t("button",{onClick:e[0]||(e[0]=u=>s.$emit("close")),class:"close-button"},e[5]||(e[5]=[t("svg",{class:"close-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("form",{onSubmit:e[4]||(e[4]=j((...u)=>i.saveTemplate&&i.saveTemplate(...u),["prevent"])),class:"modal-form"},[t("div",ce,[e[7]||(e[7]=t("label",{class:"form-label"},[f(" Nom du template "),t("span",{class:"required"},"*")],-1)),y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>a.templateName=u),type:"text",required:"",placeholder:"Ex: Email de bienvenue personnalis√©",class:"form-input"},null,512),[[x,a.templateName]])]),t("div",re,[e[8]||(e[8]=t("label",{class:"form-label"}," Description (optionnel) ",-1)),y(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=u=>a.templateDescription=u),rows:"3",placeholder:"Description du template...",class:"form-textarea"},null,512),[[x,a.templateDescription]])]),t("div",de,[e[9]||(e[9]=t("h4",{class:"preview-title"},"Aper√ßu du template :",-1)),t("div",ue,[t("div",ve,r(o.emailData.subject),1),t("div",me,r(o.emailData.message.substring(0,100))+"...",1)])]),t("div",he,[t("button",{type:"button",onClick:e[3]||(e[3]=u=>s.$emit("close")),class:"btn btn-secondary"}," Annuler "),t("button",{type:"submit",disabled:!a.templateName.trim(),class:"btn btn-primary"}," Sauvegarder ",8,pe)])],32)])])])}const fe=A(oe,[["render",ge],["__scopeId","data-v-4c38d626"]]),ke={name:"ContactsEmailsSection",components:{ContactDetailModal:se,SaveTemplateModal:fe},props:{contacts:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},pagination:{type:Object,default:()=>({page:1,limit:20,total:0,pages:1,hasNext:!1,hasPrev:!1})},filters:{type:Object,default:()=>({search:"",status:"",source:""})},selectedContacts:{type:Array,default:()=>[]}},emits:["update-filters","load-contacts","select-contact","select-all","update-status","send-email","clear-selection"],data(){return{localFilters:{...this.filters},searchTimeout:null,hoveredContact:null,showEmailComposer:!1,emailRecipients:[],emailData:{subject:"",message:""},selectedTemplate:"",sending:!1,emailTemplates:[{id:"welcome",name:"Email de bienvenue",subject:"Bienvenue {firstName} !",message:`Bonjour {firstName},

Merci de vous √™tre inscrit(e) √† YaalStudio...`},{id:"follow-up",name:"Email de relance",subject:"Suite √† votre inscription",message:`Bonjour {firstName},

J'esp√®re que vous allez bien...`}],showContactDetail:!1,selectedContactForDetail:null,showSaveTemplate:!1,showAllRecipients:!1}},computed:{isAllSelected(){return this.contacts.length>0&&this.selectedContacts.length===this.contacts.length},isPartialSelected(){return this.selectedContacts.length>0&&this.selectedContacts.length<this.contacts.length},visiblePages(){const s=this.pagination.page,e=this.pagination.pages,o=[];for(let h=Math.max(1,s-2);h<=Math.min(e,s+2);h++)o.push(h);return o},displayedRecipients(){return this.showAllRecipients?this.emailRecipients:this.emailRecipients.slice(0,3)}},watch:{filters:{handler(s){this.localFilters={...s}},deep:!0},showEmailComposer(s){s?document.body.style.overflow="hidden":document.body.style.overflow=""},showContactDetail(s){},showSaveTemplate(s){}},beforeUnmount(){document.body.style.overflow=""},methods:{debounceSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.updateFilters()},300)},updateFilters(){this.$emit("update-filters",this.localFilters)},isContactSelected(s){return this.selectedContacts.some(e=>e.id===s.id)},toggleContact(s){this.$emit("select-contact",s)},toggleSelectAll(){this.$emit("select-all")},clearSelection(){this.$emit("clear-selection")},updateContactStatus(s,e){this.$emit("update-status",s,e)},bulkUpdateStatus(s){const e=s.target.value;e&&this.selectedContacts.length>0&&(this.selectedContacts.forEach(o=>{this.$emit("update-status",o.id,e)}),s.target.value="")},openEmailComposer(){this.selectedContacts.length>0&&(this.emailRecipients=[...this.selectedContacts],this.showEmailComposer=!0,this.resetEmailForm())},composeEmailForContact(s){this.emailRecipients=[s],this.showEmailComposer=!0,this.resetEmailForm()},quickEmail(){this.openEmailComposer(),this.selectedTemplate="welcome",this.applyTemplate()},sendQuickEmail(s){this.composeEmailForContact(s),this.selectedTemplate="welcome",this.applyTemplate()},closeEmailComposer(){this.showEmailComposer=!1,this.emailRecipients=[],this.resetEmailForm(),this.showAllRecipients=!1},resetEmailForm(){this.emailData={subject:"",message:""},this.selectedTemplate=""},applyTemplate(){if(this.selectedTemplate){const s=this.emailTemplates.find(e=>e.id===this.selectedTemplate);s&&(this.emailData.subject=s.subject,this.emailData.message=s.message)}},async sendEmail(){try{this.sending=!0;const s={recipients:this.emailRecipients.map(e=>({id:e.id,email:e.email,firstName:e.firstName})),subject:this.emailData.subject,message:this.emailData.message};this.$emit("send-email",s),this.closeEmailComposer()}catch(s){console.error("Erreur envoi email:",s)}finally{this.sending=!1}},saveTemplate(){this.showSaveTemplate=!0},closeSaveTemplate(){this.showSaveTemplate=!1},handleTemplateSave(s){this.emailTemplates.push({id:Date.now().toString(),name:s.name,subject:this.emailData.subject,message:this.emailData.message}),this.closeSaveTemplate()},openContactDetail(s){this.selectedContactForDetail=s,this.showContactDetail=!0},closeContactDetail(){this.showContactDetail=!1,this.selectedContactForDetail=null},handleContactUpdate(s){this.$emit("update-status",s.id,s.status)},changePage(s){s!==this.pagination.page&&this.$emit("load-contacts",{page:s})},formatDate(s){return new Date(s).toLocaleDateString("fr-FR")},formatTime(s){return new Date(s).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},getStatusClass(s){return{"Non trait√©":"status-pending",Trait√©:"status-completed",Relanc√©:"status-follow-up"}[s]||"status-default"},getSourceClass(s){return{"Landing Page":"source-landing",Facebook:"source-facebook",Google:"source-google"}[s]||"source-default"}}},be={class:"contacts-emails-section"},Ce={class:"main-toolbar"},ye={class:"toolbar-content"},_e={class:"search-filters"},we={class:"search-container"},Se={class:"main-actions"},Ae=["disabled"],Ee={key:0,class:"selection-actions"},Te={key:0,class:"selection-bar"},xe={class:"selection-info"},Me={class:"selection-count"},De={class:"selected-contacts-preview"},je={class:"preview-avatars"},Ne={key:0,class:"more-count"},Ve={class:"quick-actions"},ze={class:"contacts-table-container"},Be={key:0,class:"loading-container"},Re={key:1,class:"empty-state"},Ie={key:2,class:"contacts-table"},Fe={class:"table-header"},Ue={class:"header-cell select-cell"},Le=["checked","indeterminate"],qe={class:"table-body"},He=["onMouseenter"],Pe={class:"row-cell select-cell"},Oe=["checked","onChange"],$e={class:"row-cell name-cell"},Ye={class:"contact-info"},Xe={class:"contact-avatar"},Ge={class:"contact-details"},Je={class:"contact-name"},Qe={key:0,class:"contact-company"},We={class:"row-cell email-cell"},Ke={class:"email-content"},Ze={class:"email-address"},ts=["onClick"],es={class:"row-cell phone-cell"},ss={class:"row-cell status-cell"},os=["value","onChange"],as={class:"row-cell source-cell"},is={class:"row-cell date-cell"},ls={class:"date-info"},ns={class:"date-value"},cs={class:"date-time"},rs={class:"row-cell actions-cell"},ds={class:"actions-menu"},us=["onClick"],vs=["onClick"],ms={key:3,class:"pagination"},hs={class:"pagination-info"},ps={class:"pagination-controls"},gs=["disabled"],fs={class:"page-numbers"},ks=["onClick"],bs=["disabled"],Cs={key:0,class:"email-composer-modal"},ys={class:"modal-content"},_s={class:"modal-header"},ws={class:"modal-title"},Ss={key:0,class:"recipients-count"},As={class:"modal-body"},Es={class:"recipients-section"},Ts={class:"recipients-header"},xs={class:"recipients-list"},Ms={class:"recipient-avatar"},Ds={class:"recipient-info"},js={class:"recipient-name"},Ns={class:"recipient-email"},Vs={class:"form-group"},zs=["value"],Bs={class:"form-group"},Rs={class:"form-group"},Is={class:"form-actions"},Fs=["disabled"],Us={class:"primary-actions"},Ls=["disabled"],qs={key:0,class:"icon spinning",fill:"none",viewBox:"0 0 24 24"},Hs={key:1,class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ps(s,e,o,h,a,i){const u=T("ContactDetailModal"),m=T("SaveTemplateModal");return n(),c("div",be,[t("div",Ce,[t("div",ye,[t("div",_e,[t("div",we,[y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.localFilters.search=l),onInput:e[1]||(e[1]=(...l)=>i.debounceSearch&&i.debounceSearch(...l)),type:"text",placeholder:"Rechercher des contacts...",class:"search-input"},null,544),[[x,a.localFilters.search]]),e[25]||(e[25]=t("div",{class:"search-icon"},[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.localFilters.status=l),onChange:e[3]||(e[3]=(...l)=>i.updateFilters&&i.updateFilters(...l)),class:"filter-select"},e[26]||(e[26]=[t("option",{value:""},"Tous les statuts",-1),t("option",{value:"Non trait√©"},"Non trait√©",-1),t("option",{value:"Trait√©"},"Trait√©",-1),t("option",{value:"Relanc√©"},"Relanc√©",-1)]),544),[[M,a.localFilters.status]]),y(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>a.localFilters.source=l),onChange:e[5]||(e[5]=(...l)=>i.updateFilters&&i.updateFilters(...l)),class:"filter-select"},e[27]||(e[27]=[t("option",{value:""},"Toutes les sources",-1),t("option",{value:"Landing Page"},"Landing Page",-1),t("option",{value:"Facebook"},"Facebook",-1),t("option",{value:"Google"},"Google",-1)]),544),[[M,a.localFilters.source]])]),t("div",Se,[t("button",{onClick:e[6]||(e[6]=(...l)=>i.openEmailComposer&&i.openEmailComposer(...l)),disabled:o.selectedContacts.length===0,class:g(["compose-btn primary",{"has-selection":o.selectedContacts.length>0}])},[e[28]||(e[28]=t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2v10a2 2 0 002 2z"})],-1)),f(" "+r(o.selectedContacts.length>0?`Envoyer √† ${o.selectedContacts.length} contact(s)`:"S√©lectionnez des contacts"),1)],10,Ae),o.selectedContacts.length>0?(n(),c("div",Ee,[t("select",{onChange:e[7]||(e[7]=(...l)=>i.bulkUpdateStatus&&i.bulkUpdateStatus(...l)),class:"bulk-select"},e[29]||(e[29]=[t("option",{value:""},"Changer le statut",-1),t("option",{value:"Non trait√©"},"Non trait√©",-1),t("option",{value:"Trait√©"},"Trait√©",-1),t("option",{value:"Relanc√©"},"Relanc√©",-1)]),32),t("button",{onClick:e[8]||(e[8]=(...l)=>i.clearSelection&&i.clearSelection(...l)),class:"clear-btn",title:"D√©s√©lectionner tout"},e[30]||(e[30]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):v("",!0)])]),o.selectedContacts.length>0?(n(),c("div",Te,[t("div",xe,[t("span",Me,r(o.selectedContacts.length)+" contact(s) s√©lectionn√©(s)",1),t("div",De,[t("div",je,[(n(!0),c(b,null,C(o.selectedContacts.slice(0,3),(l,d)=>(n(),c("div",{key:l.id,class:"contact-avatar",style:_({zIndex:3-d})},r(l.firstName.charAt(0).toUpperCase()),5))),128)),o.selectedContacts.length>3?(n(),c("div",Ne," +"+r(o.selectedContacts.length-3),1)):v("",!0)])])]),t("div",Ve,[t("button",{onClick:e[9]||(e[9]=(...l)=>i.quickEmail&&i.quickEmail(...l)),class:"quick-action-btn primary"},e[31]||(e[31]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),f(" Envoi rapide ")])),t("button",{onClick:e[10]||(e[10]=(...l)=>i.openEmailComposer&&i.openEmailComposer(...l)),class:"quick-action-btn"},e[32]||(e[32]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),f(" Composer ")]))])])):v("",!0)]),t("div",ze,[o.loading?(n(),c("div",Be,e[33]||(e[33]=[p('<div class="loading-spinner" data-v-7b789f1b><svg class="spinner" fill="none" viewBox="0 0 24 24" data-v-7b789f1b><circle class="spinner-circle" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-7b789f1b></circle><path class="spinner-path" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-7b789f1b></path></svg><p class="loading-text" data-v-7b789f1b>Chargement des contacts...</p></div>',1)]))):o.contacts.length===0?(n(),c("div",Re,e[34]||(e[34]=[p('<div class="empty-icon" data-v-7b789f1b><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7b789f1b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-7b789f1b></path></svg></div><h3 class="empty-title" data-v-7b789f1b>Aucun contact trouv√©</h3><p class="empty-description" data-v-7b789f1b>Aucun contact ne correspond √† vos crit√®res de recherche.</p>',3)]))):(n(),c("div",Ie,[t("div",Fe,[t("div",Ue,[t("input",{type:"checkbox",checked:i.isAllSelected,indeterminate:i.isPartialSelected,onChange:e[11]||(e[11]=(...l)=>i.toggleSelectAll&&i.toggleSelectAll(...l)),class:"checkbox"},null,40,Le)]),e[35]||(e[35]=p('<div class="header-cell name-cell" data-v-7b789f1b>Contact</div><div class="header-cell email-cell" data-v-7b789f1b>Email</div><div class="header-cell phone-cell" data-v-7b789f1b>T√©l√©phone</div><div class="header-cell status-cell" data-v-7b789f1b>Statut</div><div class="header-cell source-cell" data-v-7b789f1b>Source</div><div class="header-cell date-cell" data-v-7b789f1b>Date</div><div class="header-cell actions-cell" data-v-7b789f1b>Actions</div>',7))]),t("div",qe,[(n(!0),c(b,null,C(o.contacts,l=>(n(),c("div",{key:l.id,class:g(["contact-row",{selected:i.isContactSelected(l),hover:a.hoveredContact===l.id}]),onMouseenter:d=>a.hoveredContact=l.id,onMouseleave:e[12]||(e[12]=d=>a.hoveredContact=null)},[t("div",Pe,[t("input",{type:"checkbox",checked:i.isContactSelected(l),onChange:d=>i.toggleContact(l),class:"checkbox"},null,40,Oe)]),t("div",$e,[t("div",Ye,[t("div",Xe,r(l.firstName.charAt(0).toUpperCase()),1),t("div",Ge,[t("div",Je,r(l.firstName)+" "+r(l.lastName||""),1),l.company?(n(),c("div",Qe,r(l.company),1)):v("",!0)])])]),t("div",We,[t("div",Ke,[t("span",Ze,r(l.email),1),t("button",{onClick:d=>i.sendQuickEmail(l),class:"quick-email-btn",title:"Envoi rapide"},e[36]||(e[36]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,ts)])]),t("div",es,r(l.phone||"-"),1),t("div",ss,[t("select",{value:l.status,onChange:d=>i.updateContactStatus(l.id,d.target.value),class:g(["status-select",i.getStatusClass(l.status)])},e[37]||(e[37]=[t("option",{value:"Non trait√©"},"Non trait√©",-1),t("option",{value:"Trait√©"},"Trait√©",-1),t("option",{value:"Relanc√©"},"Relanc√©",-1)]),42,os)]),t("div",as,[t("span",{class:g(["source-badge",i.getSourceClass(l.source)])},r(l.source||"Inconnue"),3)]),t("div",is,[t("div",ls,[t("div",ns,r(i.formatDate(l.createdAt)),1),t("div",cs,r(i.formatTime(l.createdAt)),1)])]),t("div",rs,[t("div",ds,[t("button",{onClick:d=>i.openContactDetail(l),class:"action-btn",title:"Voir d√©tails"},e[38]||(e[38]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)]),8,us),t("button",{onClick:d=>i.composeEmailForContact(l),class:"action-btn",title:"Envoyer email"},e[39]||(e[39]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)]),8,vs)])])],42,He))),128))])])),o.contacts.length>0?(n(),c("div",ms,[t("div",hs," Affichage de "+r((o.pagination.page-1)*o.pagination.limit+1)+" √† "+r(Math.min(o.pagination.page*o.pagination.limit,o.pagination.total))+" sur "+r(o.pagination.total)+" contacts ",1),t("div",ps,[t("button",{onClick:e[13]||(e[13]=l=>i.changePage(o.pagination.page-1)),disabled:!o.pagination.hasPrev,class:"pagination-btn"},e[40]||(e[40]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),f(" Pr√©c√©dent ")]),8,gs),t("div",fs,[(n(!0),c(b,null,C(i.visiblePages,l=>(n(),c("button",{key:l,onClick:d=>i.changePage(l),class:g([["page-btn",{active:l===o.pagination.page}],"pagination-btn"])},r(l),11,ks))),128))]),t("button",{onClick:e[14]||(e[14]=l=>i.changePage(o.pagination.page+1)),disabled:!o.pagination.hasNext,class:"pagination-btn"},e[41]||(e[41]=[f(" Suivant "),t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,bs)])])):v("",!0)]),a.showEmailComposer?(n(),c("div",Cs,[t("div",{class:"modal-backdrop",onClick:e[15]||(e[15]=(...l)=>i.closeEmailComposer&&i.closeEmailComposer(...l))}),t("div",ys,[t("div",_s,[t("h3",ws,[e[42]||(e[42]=f(" Composer un email ")),a.emailRecipients.length>1?(n(),c("span",Ss," ("+r(a.emailRecipients.length)+" destinataires) ",1)):v("",!0)]),t("button",{onClick:e[16]||(e[16]=(...l)=>i.closeEmailComposer&&i.closeEmailComposer(...l)),class:"close-btn"},e[43]||(e[43]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",As,[t("div",Es,[t("div",Ts,[e[44]||(e[44]=t("span",{class:"section-label"},"Destinataires",-1)),a.emailRecipients.length>3?(n(),c("button",{key:0,onClick:e[17]||(e[17]=l=>a.showAllRecipients=!a.showAllRecipients),class:"toggle-recipients-btn"},r(a.showAllRecipients?"R√©duire":`Voir tous (${a.emailRecipients.length})`),1)):v("",!0)]),t("div",xs,[(n(!0),c(b,null,C(i.displayedRecipients,l=>(n(),c("div",{key:l.id,class:"recipient-item"},[t("div",Ms,r(l.firstName.charAt(0).toUpperCase()),1),t("div",Ds,[t("div",js,r(l.firstName)+" "+r(l.lastName||""),1),t("div",Ns,r(l.email),1)])]))),128))])]),t("form",{onSubmit:e[24]||(e[24]=j((...l)=>i.sendEmail&&i.sendEmail(...l),["prevent"])),class:"email-form"},[t("div",Vs,[e[46]||(e[46]=t("label",{class:"form-label"},"Template (optionnel)",-1)),y(t("select",{"onUpdate:modelValue":e[18]||(e[18]=l=>a.selectedTemplate=l),onChange:e[19]||(e[19]=(...l)=>i.applyTemplate&&i.applyTemplate(...l)),class:"form-select"},[e[45]||(e[45]=t("option",{value:""},"S√©lectionner un template",-1)),(n(!0),c(b,null,C(a.emailTemplates,l=>(n(),c("option",{key:l.id,value:l.id},r(l.name),9,zs))),128))],544),[[M,a.selectedTemplate]])]),t("div",Bs,[e[47]||(e[47]=t("label",{class:"form-label"},[f(" Sujet "),t("span",{class:"required"},"*")],-1)),y(t("input",{"onUpdate:modelValue":e[20]||(e[20]=l=>a.emailData.subject=l),type:"text",required:"",placeholder:"Sujet de l'email",class:"form-input"},null,512),[[x,a.emailData.subject]])]),t("div",Rs,[e[48]||(e[48]=t("label",{class:"form-label"},[f(" Message "),t("span",{class:"required"},"*")],-1)),y(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=l=>a.emailData.message=l),required:"",placeholder:"Votre message...",rows:"8",class:"form-textarea"},null,512),[[x,a.emailData.message]]),e[49]||(e[49]=t("div",{class:"message-help"}," Vous pouvez utiliser {firstName} pour personnaliser avec le pr√©nom. ",-1))]),t("div",Is,[t("button",{type:"button",onClick:e[22]||(e[22]=(...l)=>i.saveTemplate&&i.saveTemplate(...l)),class:"save-template-btn",disabled:!a.emailData.subject||!a.emailData.message},e[50]||(e[50]=[t("svg",{class:"icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})],-1),f(" Sauvegarder comme template ")]),8,Fs),t("div",Us,[t("button",{type:"button",onClick:e[23]||(e[23]=(...l)=>i.closeEmailComposer&&i.closeEmailComposer(...l)),class:"cancel-btn"}," Annuler "),t("button",{type:"submit",disabled:a.sending||!a.emailData.subject||!a.emailData.message,class:"send-btn"},[a.sending?(n(),c("svg",qs,e[51]||(e[51]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),c("svg",Hs,e[52]||(e[52]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)]))),f(" "+r(a.sending?"Envoi...":"Envoyer"),1)],8,Ls)])])],32)])])])):v("",!0),a.showContactDetail?(n(),D(u,{key:1,contact:a.selectedContactForDetail,onClose:i.closeContactDetail,onUpdate:i.handleContactUpdate},null,8,["contact","onClose","onUpdate"])):v("",!0),a.showSaveTemplate?(n(),D(m,{key:2,templateData:a.emailData,onClose:i.closeSaveTemplate,onSave:i.handleTemplateSave},null,8,["templateData","onClose","onSave"])):v("",!0)])}const Os=A(ke,[["render",Ps],["__scopeId","data-v-7b789f1b"]]),$s={name:"AnalyticsSection",props:{analytics:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},computed:{hasAnyData(){console.log("üìä Analytics data received:",this.analytics);const s=this.analytics.pageViews&&(this.analytics.pageViews.today>0||this.analytics.pageViews.week>0||this.analytics.pageViews.month>0),e=this.analytics.sources&&this.analytics.sources.length>0&&this.analytics.sources.some(a=>a.count>0),o=this.analytics.devices&&this.analytics.devices.length>0&&this.analytics.devices.some(a=>a.count>0),h=s||e||o;return console.log("üìä Has any data:",h,{hasPageViews:s,hasSources:e,hasDevices:o}),h}},methods:{formatNumber(s){return s==null?"0":s.toLocaleString("fr-FR")},getSourceColorClass(s){const e=["blue","green","purple","yellow","red","indigo"];return e[s%e.length]},getDeviceColorClass(s){const e=["emerald","cyan","pink"];return e[s%e.length]}}},Ys={class:"analytics-section"},Xs={key:0,class:"overview-card loading-card"},Gs={key:1,class:"overview-card empty-state"},Js={key:2,class:"analytics-content"},Qs={class:"metrics-grid"},Ws={class:"metric-card"},Ks={class:"metric-value"},Zs={class:"metric-card"},to={class:"metric-value"},eo={class:"metric-card"},so={class:"metric-value"},oo={class:"analytics-charts-grid"},ao={class:"chart-card"},io={class:"chart-content"},lo={key:0,class:"chart-empty"},no={key:1,class:"chart-list"},co={class:"chart-item-content"},ro={class:"chart-item-info"},uo={class:"chart-item-label"},vo={class:"chart-item-value"},mo={class:"chart-progress-bar"},ho={class:"chart-card"},po={class:"chart-content"},go={key:0,class:"chart-empty"},fo={key:1,class:"chart-list"},ko={class:"chart-item-content"},bo={class:"chart-item-info"},Co={class:"chart-item-label"},yo={class:"chart-item-value"},_o={class:"chart-progress-bar"};function wo(s,e,o,h,a,i){var u,m,l;return n(),c("div",Ys,[e[9]||(e[9]=t("div",{class:"analytics-header"},[t("h2",{class:"section-title"},"Analytics & Performance"),t("p",{class:"section-description"}," Analysez votre trafic et les performances de votre site ")],-1)),o.loading?(n(),c("div",Xs,e[0]||(e[0]=[p('<div class="loading-spinner" data-v-51c177f0><svg class="spinner" fill="none" viewBox="0 0 24 24" data-v-51c177f0><circle class="spinner-circle" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-51c177f0></circle><path class="spinner-path" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-51c177f0></path></svg><p class="loading-text" data-v-51c177f0>Chargement des analytics...</p></div>',1)]))):i.hasAnyData?(n(),c("div",Js,[t("div",Qs,[t("div",Ws,[e[2]||(e[2]=p('<div class="metric-header" data-v-51c177f0><h3 class="metric-label" data-v-51c177f0>VUES AUJOURD&#39;HUI</h3><div class="metric-icon today" data-v-51c177f0><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51c177f0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" data-v-51c177f0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" data-v-51c177f0></path></svg></div></div>',1)),t("div",Ks,r(i.formatNumber(((u=o.analytics.pageViews)==null?void 0:u.today)||0)),1)]),t("div",Zs,[e[3]||(e[3]=p('<div class="metric-header" data-v-51c177f0><h3 class="metric-label" data-v-51c177f0>CETTE SEMAINE</h3><div class="metric-icon week" data-v-51c177f0><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51c177f0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" data-v-51c177f0></path></svg></div></div>',1)),t("div",to,r(i.formatNumber(((m=o.analytics.pageViews)==null?void 0:m.week)||0)),1)]),t("div",eo,[e[4]||(e[4]=p('<div class="metric-header" data-v-51c177f0><h3 class="metric-label" data-v-51c177f0>CE MOIS</h3><div class="metric-icon month" data-v-51c177f0><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51c177f0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-51c177f0></path></svg></div></div>',1)),t("div",so,r(i.formatNumber(((l=o.analytics.pageViews)==null?void 0:l.month)||0)),1)])]),t("div",oo,[t("div",ao,[e[6]||(e[6]=t("h3",{class:"chart-title"},"SOURCES DE TRAFIC",-1)),t("div",io,[!o.analytics.sources||o.analytics.sources.every(d=>d.count===0)?(n(),c("div",lo,e[5]||(e[5]=[t("p",{class:"chart-empty-text"},"Aucune donn√©e de source disponible",-1)]))):(n(),c("div",no,[(n(!0),c(b,null,C((o.analytics.sources||[]).filter(d=>d.count>0),(d,E)=>(n(),c("div",{key:d.name,class:"chart-item"},[t("div",co,[t("div",ro,[t("span",uo,r(d.name.toUpperCase()),1),t("span",vo,r(d.count),1)]),t("div",mo,[t("div",{class:g(`chart-progress-fill ${i.getSourceColorClass(E)}`),style:_({width:`${d.percentage}%`})},null,6)])])]))),128))]))])]),t("div",ho,[e[8]||(e[8]=t("h3",{class:"chart-title"},"APPAREILS UTILIS√âS",-1)),t("div",po,[!o.analytics.devices||o.analytics.devices.every(d=>d.count===0)?(n(),c("div",go,e[7]||(e[7]=[t("p",{class:"chart-empty-text"},"Aucune donn√©e d'appareil disponible",-1)]))):(n(),c("div",fo,[(n(!0),c(b,null,C((o.analytics.devices||[]).filter(d=>d.count>0),(d,E)=>(n(),c("div",{key:d.name,class:"chart-item"},[t("div",ko,[t("div",bo,[t("span",Co,r(d.name.toUpperCase()),1),t("span",yo,r(d.count),1)]),t("div",_o,[t("div",{class:g(`chart-progress-fill ${i.getDeviceColorClass(E)}`),style:_({width:`${d.percentage}%`})},null,6)])])]))),128))]))])])])])):(n(),c("div",Gs,e[1]||(e[1]=[p('<div class="empty-icon" data-v-51c177f0><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-51c177f0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" data-v-51c177f0></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" data-v-51c177f0></path></svg></div><h3 class="empty-title" data-v-51c177f0>Aucune donn√©e analytique</h3><p class="empty-description" data-v-51c177f0> Les donn√©es analytiques appara√Ætront ici une fois que votre site recevra du trafic. Actuellement, aucune activit√© n&#39;a √©t√© d√©tect√©e dans vos statistiques. </p>',3)])))])}const So=A($s,[["render",wo],["__scopeId","data-v-51c177f0"]]),Ao={name:"Dashboard",components:{StatsSection:St,ContactsEmailsSection:Os,AnalyticsSection:So},data(){return{activeTab:"overview",loading:!1,error:null,stats:{totalContacts:0,todayContacts:0,weekContacts:0,monthContacts:0,conversionRate:0,uniqueVisitors:0,avgSessionDuration:0,byStatus:[],topSources:[],emailCampaigns:0},contacts:[],analytics:{pageViews:{today:0,week:0,month:0},sources:[],devices:[]},pagination:{page:1,limit:20,total:0,pages:1,hasNext:!1,hasPrev:!1},filters:{search:"",status:"",source:""},selectedContacts:[],tabs:[{id:"overview",name:"Vue d'ensemble",icon:"HomeIcon",badge:null},{id:"contacts",name:"Contacts & Emails",icon:"UsersMailIcon",badge:0},{id:"analytics",name:"Analytics",icon:"ChartPieIcon",badge:null}],seeding:!1,exportFormat:"csv"}},computed:{isAllSelected(){return this.contacts.length>0&&this.selectedContacts.length===this.contacts.length},isPartialSelected(){return this.selectedContacts.length>0&&this.selectedContacts.length<this.contacts.length}},async mounted(){console.log("‚úÖ Dashboard mont√©");try{const s=w();if(s.isInitialized){if(!s.isLoggedIn){console.log("‚ùå Session expir√©e - Redirection vers login"),await k("/login");return}}else if(console.log("üîê Initialisation de l'authentification..."),!await s.initAuth()){console.log("‚ùå Non authentifi√© - Redirection vers login"),await k("/login");return}console.log("‚úÖ Authentification valid√©e, chargement des donn√©es..."),await this.loadDashboardData()}catch(s){console.error("‚ùå Erreur authentification dashboard:",s),await k("/login")}},methods:{async loadDashboardData(){try{this.loading=!0,this.error=null,await Promise.all([this.loadStats(),this.loadContacts(),this.loadAnalytics()])}catch(s){console.error("‚ùå Erreur chargement dashboard:",s),this.error="Erreur lors du chargement des donn√©es"}finally{this.loading=!1}},async loadStats(){try{const s=w(),e=await $fetch("/api/dashboard/stats",{headers:{Authorization:`Bearer ${s.token}`}});e.success&&(this.stats=e.data)}catch(s){console.error("‚ùå Erreur chargement stats:",s),s.statusCode===401&&(console.log("üîí Token expir√©, redirection vers login"),await k("/login"))}},async loadContacts(s={}){try{const e=w();s.page&&(this.pagination.page=s.page);const o={...this.filters,page:this.pagination.page,limit:this.pagination.limit},h=await $fetch("/api/dashboard/contacts",{query:o,headers:{Authorization:`Bearer ${e.token}`}});h.success&&(this.contacts=h.data.contacts,this.pagination={...h.data.pagination,pages:h.data.pagination.totalPages},this.tabs.find(a=>a.id==="contacts").badge=this.contacts.length)}catch(e){console.error("‚ùå Erreur chargement contacts:",e),e.statusCode===401&&await k("/login")}},async loadAnalytics(){try{const s=w(),e=await $fetch("/api/dashboard/analytics",{headers:{Authorization:`Bearer ${s.token}`}});e.success&&(this.analytics=e.data)}catch(s){console.error("‚ùå Erreur chargement analytics:",s),s.statusCode===401&&(console.log("üîí Token expir√©, redirection vers login"),await k("/login")),s.statusCode===404&&console.log("üìä API Analytics pas encore impl√©ment√©e")}},changeTab(s){this.activeTab=s},async refreshAll(){await this.loadDashboardData()},updateFilters(s){this.filters={...this.filters,...s},this.pagination.page=1,this.loadContacts()},toggleContactSelection(s){const e=this.selectedContacts.findIndex(o=>o.id===s.id);e>-1?this.selectedContacts.splice(e,1):this.selectedContacts.push(s)},toggleSelectAll(){this.isAllSelected?this.selectedContacts=[]:this.selectedContacts=[...this.contacts]},async updateContactStatus(s,e){try{const o=w();if((await $fetch(`/api/dashboard/contacts/${s}`,{method:"PATCH",body:{status:e},headers:{Authorization:`Bearer ${o.token}`}})).success){const a=this.contacts.find(i=>i.id===s);a&&(a.status=e)}}catch(o){console.error("‚ùå Erreur mise √† jour statut:",o),o.statusCode===401&&(console.log("üîí Token expir√©, redirection vers login"),await k("/login"))}},clearAllSelection(){this.selectedContacts=[]},goToContactsWithEmail(){this.changeTab("contacts"),setTimeout(()=>{this.contacts.length>0&&(this.selectedContacts=[...this.contacts])},100)},quickComposeEmail(){this.changeTab("contacts")},selectAllContacts(){this.selectedContacts=[...this.contacts],this.changeTab("contacts")},async downloadData(){if(this.contacts.length===0){alert("Aucune donn√©e √† exporter");return}const s=await N(()=>import("./DkH2s96g.js"),[],import.meta.url),o=[["Pr√©nom","Email","T√©l√©phone","Statut","Source","Date de cr√©ation"],...this.contacts.map(i=>[i.firstName||"",i.email||"",i.phone||"",i.status||"",i.source||"",i.createdAt?new Date(i.createdAt).toLocaleDateString("fr-FR"):""])],a=`yaalstudio-contacts-${new Date().toISOString().split("T")[0]}`;if(this.exportFormat==="xlsx"){const i=s.utils.aoa_to_sheet(o),u=s.utils.decode_range(i["!ref"]);for(let l=u.s.c;l<=u.e.c;l++){const d=s.utils.encode_cell({r:0,c:l});i[d]&&(i[d].s={font:{bold:!0},fill:{fgColor:{rgb:"CCCCCC"}}})}i["!cols"]=[{wch:20},{wch:25},{wch:15},{wch:12},{wch:15},{wch:18}];const m=s.utils.book_new();s.utils.book_append_sheet(m,i,"Contacts"),m.Props={Title:"Contacts YaalStudio",Subject:"Liste des contacts",Author:"YaalStudio Dashboard",CreatedDate:new Date},s.writeFile(m,`${a}.xlsx`)}else{const i=o.map(d=>d.map(E=>`"${String(E).replace(/"/g,'""')}"`).join(",")).join(`
`),u="\uFEFF",m=new Blob([u+i],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");if(l.download!==void 0){const d=URL.createObjectURL(m);l.setAttribute("href",d),l.setAttribute("download",`${a}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(d)}}},formatTimeAgo(s){const o=Math.floor((new Date-s)/1e3);return o<60?"Il y a quelques secondes":o<3600?`Il y a ${Math.floor(o/60)} minutes`:o<86400?`Il y a ${Math.floor(o/3600)} heures`:`Il y a ${Math.floor(o/86400)} jours`},async sendMassEmail(s){try{this.loading=!0;const e=w();(await $fetch("/api/dashboard/emails/send-mass",{method:"POST",body:s,headers:{Authorization:`Bearer ${e.token}`}})).success&&(alert("Emails envoy√©s avec succ√®s !"),this.selectedContacts=[])}catch(e){console.error("‚ùå Erreur envoi emails:",e),e.statusCode===401?(console.log("üîí Token expir√©, redirection vers login"),await k("/login")):alert("Erreur lors de l'envoi des emails")}finally{this.loading=!1}},async handleLogout(){try{this.loading=!0,await w().logout(),await k("/login",{replace:!0}),setTimeout(()=>{window.location.href="/login"},100)}catch(s){console.error("‚ùå Erreur lors de la d√©connexion:",s),window.location.href="/login"}finally{this.loading=!1}},async seedContacts(){try{this.seeding=!0;const s=w(),e=await $fetch("/api/seed-contacts",{method:"POST",headers:{Authorization:`Bearer ${s.token}`}});e.success?(alert(`‚úÖ ${e.message}`),await this.loadContacts()):alert("Erreur lors de la cr√©ation des contacts de test.")}catch(s){console.error("‚ùå Erreur seeding contacts:",s),s.statusCode===401?(console.log("üîí Token expir√©, redirection vers login"),await k("/login")):alert("Erreur lors de la cr√©ation des contacts de test.")}finally{this.seeding=!1}}}},Eo={class:"dashboard-page"},To={class:"dashboard-content"},xo={class:"dashboard-header"},Mo={class:"container"},Do={class:"header-content"},jo={class:"header-main"},No={class:"header-stats"},Vo={class:"stat-card"},zo={class:"stat-content"},Bo={class:"stat-number"},Ro={class:"stat-card"},Io={class:"stat-content"},Fo={class:"stat-number"},Uo={class:"stat-card"},Lo={class:"stat-content"},qo={class:"stat-number"},Ho={class:"header-actions"},Po={class:"actions-group"},Oo=["disabled"],$o={key:0,class:"action-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yo={key:1,class:"action-icon spinning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xo={key:0,class:"selection-indicator"},Go={class:"selection-badge"},Jo=["disabled"],Qo={key:0,class:"logout-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wo={key:1,class:"logout-icon spinning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ko={class:"logout-text"},Zo={class:"dashboard-nav"},ta={class:"container"},ea={class:"nav-tabs"},sa=["onClick"],oa={class:"tab-content"},aa={key:0,class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ia={key:1,class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},la={key:2,class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},na={class:"tab-label"},ca={key:3,class:"tab-badge"},ra={class:"dashboard-main"},da={class:"container"},ua={key:0,class:"error-message"},va={key:1,class:"tab-content"},ma={class:"overview-section"},ha={class:"overview-main-stats"},pa={class:"overview-content-grid"},ga={class:"overview-column left-column"},fa={class:"overview-card quick-actions-card"},ka={class:"quick-actions-grid"},ba={class:"quick-action-card contacts"},Ca={class:"metric-value"},ya={class:"metric-value"},_a=["disabled"],wa={class:"quick-action-card analytics"},Sa={class:"metric-value"},Aa={class:"metric-header"},Ea={class:"metric-icon refresh"},Ta={class:"metric-value"},xa=["disabled"],Ma={class:"overview-card shortcuts-card"},Da={class:"shortcuts-list"},ja=["disabled"],Na={class:"shortcut-item export-item"},Va={class:"export-controls"},za=["disabled"],Ba={class:"overview-column right-column"},Ra={class:"overview-card activity-card"},Ia={class:"activity-list"},Fa={class:"activity-item"},Ua={class:"activity-item-info"},La={class:"activity-value"},qa={class:"activity-progress-bar"},Ha={class:"activity-item"},Pa={class:"activity-item-info"},Oa={class:"activity-value"},$a={class:"activity-progress-bar"},Ya={key:0,class:"activity-item"},Xa={class:"activity-item-info"},Ga={class:"activity-value"},Ja={class:"activity-progress-bar"},Qa={key:1,class:"activity-item"},Wa={class:"activity-item-info"},Ka={class:"activity-value"},Za={class:"activity-item"},ti={class:"activity-item-info"},ei={class:"activity-value"},si={class:"activity-progress-bar"},oi={key:2,class:"tab-content"},ai={key:0,class:"seed-section"},ii={class:"seed-card"},li={class:"seed-content"},ni=["disabled"],ci={key:0,class:"seed-spinner",fill:"none",viewBox:"0 0 24 24"},ri={key:1,class:"seed-icon-btn",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},di={key:3,class:"tab-content"};function ui(s,e,o,h,a,i){const u=T("StatsSection"),m=T("ContactsEmailsSection"),l=T("AnalyticsSection");return n(),c("div",Eo,[e[49]||(e[49]=p('<div class="twinkling-dots" data-v-c9cf0808><div class="dot dot-1" data-v-c9cf0808></div><div class="dot dot-2" data-v-c9cf0808></div><div class="dot dot-3" data-v-c9cf0808></div><div class="dot dot-4" data-v-c9cf0808></div><div class="dot dot-5" data-v-c9cf0808></div></div>',1)),t("div",To,[t("header",xo,[t("div",Mo,[t("div",Do,[t("div",jo,[e[16]||(e[16]=t("div",{class:"header-branding"},[t("h1",{class:"dashboard-title blinka-serif"},"YaalStudio"),t("span",{class:"dashboard-subtitle"},"Dashboard")],-1)),t("div",No,[t("div",Vo,[t("div",zo,[t("span",Bo,r(a.stats.totalContacts||0),1),e[11]||(e[11]=t("span",{class:"stat-label"},"Contacts Total",-1))])]),e[14]||(e[14]=t("div",{class:"stat-divider"},null,-1)),t("div",Ro,[t("div",Io,[t("span",Fo,r(a.stats.todayContacts||0),1),e[12]||(e[12]=t("span",{class:"stat-label"},"Aujourd'hui",-1))])]),e[15]||(e[15]=t("div",{class:"stat-divider"},null,-1)),t("div",Uo,[t("div",Lo,[t("span",qo,r(a.selectedContacts.length),1),e[13]||(e[13]=t("span",{class:"stat-label"},"S√©lectionn√©s",-1))])])])]),t("div",Ho,[t("div",Po,[t("button",{onClick:e[0]||(e[0]=(...d)=>i.refreshAll&&i.refreshAll(...d)),class:g(["action-button refresh-btn",{loading:a.loading}]),disabled:a.loading,title:"Actualiser les donn√©es"},[a.loading?(n(),c("svg",Yo,e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(n(),c("svg",$o,e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],10,Oo),a.selectedContacts.length>0?(n(),c("div",Xo,[t("div",Go,[e[19]||(e[19]=t("svg",{class:"selection-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+r(a.selectedContacts.length),1)]),t("button",{onClick:e[1]||(e[1]=(...d)=>i.quickComposeEmail&&i.quickComposeEmail(...d)),class:"quick-compose-btn",title:"Composition rapide"},e[20]||(e[20]=[t("svg",{class:"action-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))])):v("",!0),e[23]||(e[23]=p('<div class="user-profile" data-v-c9cf0808><div class="user-avatar" data-v-c9cf0808><div class="avatar-indicator" data-v-c9cf0808></div><span class="avatar-text" data-v-c9cf0808>YS</span></div><div class="user-details" data-v-c9cf0808><span class="user-name" data-v-c9cf0808>Admin</span><span class="user-role" data-v-c9cf0808>YaalStudio</span></div></div>',1)),t("button",{onClick:e[2]||(e[2]=(...d)=>i.handleLogout&&i.handleLogout(...d)),class:g(["logout-btn",{loading:a.loading}]),disabled:a.loading,title:"Se d√©connecter"},[a.loading?(n(),c("svg",Wo,e[22]||(e[22]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),c("svg",Qo,e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)]))),t("span",Ko,r(a.loading?"D√©connexion...":"D√©connexion"),1)],10,Jo)])])])])]),t("div",Zo,[t("div",ta,[t("nav",ea,[(n(!0),c(b,null,C(a.tabs,d=>(n(),c("button",{key:d.id,onClick:E=>i.changeTab(d.id),class:g(["nav-tab",{active:a.activeTab===d.id}])},[t("span",oa,[d.icon==="HomeIcon"?(n(),c("svg",aa,e[24]||(e[24]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)]))):d.icon==="UsersMailIcon"?(n(),c("svg",ia,e[25]||(e[25]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)]))):d.icon==="ChartPieIcon"?(n(),c("svg",la,e[26]||(e[26]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"},null,-1)]))):v("",!0),t("span",na,r(d.name),1),d.badge?(n(),c("span",ca,r(d.badge),1)):v("",!0)])],10,sa))),128))])])]),t("main",ra,[t("div",da,[a.error?(n(),c("div",ua,r(a.error),1)):v("",!0),a.activeTab==="overview"?(n(),c("div",va,[t("div",ma,[e[45]||(e[45]=t("div",{class:"overview-header"},[t("h2",{class:"section-title"},"VUE D'ENSEMBLE"),t("p",{class:"section-description"}," Aper√ßu complet de vos performances et activit√©s r√©centes ")],-1)),t("div",ha,[S(u,{stats:a.stats,loading:a.loading},null,8,["stats","loading"])]),t("div",pa,[t("div",ga,[t("div",fa,[e[32]||(e[32]=t("h3",{class:"card-title"},"ACTIONS RAPIDES",-1)),t("div",ka,[t("div",ba,[e[27]||(e[27]=p('<div class="metric-header" data-v-c9cf0808><h4 class="metric-label" data-v-c9cf0808>CONTACTS</h4><div class="metric-icon contacts" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-c9cf0808></path></svg></div></div>',1)),t("div",Ca,r(a.stats.totalContacts||0),1),t("button",{onClick:e[3]||(e[3]=d=>i.changeTab("contacts")),class:"metric-action"},"Voir les contacts")]),t("div",{class:g(["quick-action-card emails",{disabled:a.contacts.length===0}])},[e[28]||(e[28]=p('<div class="metric-header" data-v-c9cf0808><h4 class="metric-label" data-v-c9cf0808>EMAILS</h4><div class="metric-icon emails" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-c9cf0808></path></svg></div></div>',1)),t("div",ya,r(a.selectedContacts.length),1),t("button",{onClick:e[4]||(e[4]=(...d)=>i.goToContactsWithEmail&&i.goToContactsWithEmail(...d)),class:"metric-action",disabled:a.contacts.length===0}," Envoyer emails ",8,_a)],2),t("div",wa,[e[29]||(e[29]=p('<div class="metric-header" data-v-c9cf0808><h4 class="metric-label" data-v-c9cf0808>ANALYTICS</h4><div class="metric-icon analytics" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-c9cf0808></path></svg></div></div>',1)),t("div",Sa,r(a.stats.conversionRate||0)+"%",1),t("button",{onClick:e[5]||(e[5]=d=>i.changeTab("analytics")),class:"metric-action"},"Voir analytics")]),t("div",{class:g(["quick-action-card refresh",{loading:a.loading}])},[t("div",Aa,[e[31]||(e[31]=t("h4",{class:"metric-label"},"ACTUALISER",-1)),t("div",Ea,[(n(),c("svg",{class:g({spinning:a.loading}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[30]||(e[30]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))])]),t("div",Ta,r(a.loading?"...":"OK"),1),t("button",{onClick:e[6]||(e[6]=(...d)=>i.refreshAll&&i.refreshAll(...d)),class:"metric-action",disabled:a.loading},"Actualiser",8,xa)],2)])]),t("div",Ma,[e[36]||(e[36]=t("h3",{class:"card-title"},"RACCOURCIS AVANC√âS",-1)),t("div",Da,[a.contacts.length>0?(n(),c("div",{key:0,class:g(["shortcut-item",{disabled:a.contacts.length===0}])},[e[33]||(e[33]=p('<div class="shortcut-icon" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-c9cf0808></path></svg></div><div class="shortcut-content" data-v-c9cf0808><div class="shortcut-label" data-v-c9cf0808>S√âLECTIONNER TOUS</div><div class="shortcut-description" data-v-c9cf0808>S√©lectionner tous les contacts pour envoi</div></div>',2)),t("button",{onClick:e[7]||(e[7]=(...d)=>i.selectAllContacts&&i.selectAllContacts(...d)),disabled:a.contacts.length===0,class:"shortcut-action"}," S√©lectionner ",8,ja)],2)):v("",!0),t("div",Na,[e[35]||(e[35]=p('<div class="shortcut-icon" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-c9cf0808></path></svg></div><div class="shortcut-content" data-v-c9cf0808><div class="shortcut-label" data-v-c9cf0808>EXPORTER DONN√âES</div><div class="shortcut-description" data-v-c9cf0808>T√©l√©charger en CSV ou Excel</div></div>',2)),t("div",Va,[y(t("select",{"onUpdate:modelValue":e[8]||(e[8]=d=>a.exportFormat=d),class:"export-format-select"},e[34]||(e[34]=[t("option",{value:"csv"},"CSV",-1),t("option",{value:"xlsx"},"Excel",-1)]),512),[[M,a.exportFormat]]),t("button",{onClick:e[9]||(e[9]=(...d)=>i.downloadData&&i.downloadData(...d)),class:"shortcut-action",disabled:a.contacts.length===0}," Exporter ",8,za)])])])])]),t("div",Ba,[t("div",Ra,[e[43]||(e[43]=t("h3",{class:"card-title"},"ACTIVIT√â R√âCENTE",-1)),t("div",Ia,[t("div",Fa,[t("div",Ua,[e[37]||(e[37]=t("div",{class:"activity-label"},"NOUVEAUX CONTACTS AUJOURD'HUI",-1)),t("div",La,r(a.stats.todayContacts||0),1)]),t("div",qa,[t("div",{class:"activity-progress-fill new",style:_({width:a.stats.todayContacts>0?"100%":"10%"})},null,4)])]),t("div",Ha,[t("div",Pa,[e[38]||(e[38]=t("div",{class:"activity-label"},"CONTACTS CETTE SEMAINE",-1)),t("div",Oa,r(a.stats.weekContacts||0),1)]),t("div",$a,[t("div",{class:"activity-progress-fill week",style:_({width:`${Math.min(a.stats.weekContacts/Math.max(a.stats.totalContacts,1)*100,100)}%`})},null,4)])]),a.selectedContacts.length>0?(n(),c("div",Ya,[t("div",Xa,[e[39]||(e[39]=t("div",{class:"activity-label"},"CONTACTS S√âLECTIONN√âS",-1)),t("div",Ga,r(a.selectedContacts.length),1)]),t("div",Ja,[t("div",{class:"activity-progress-fill selection",style:_({width:`${Math.min(a.selectedContacts.length/Math.max(a.stats.totalContacts,1)*100,100)}%`})},null,4)])])):v("",!0),a.stats.emailCampaigns>0?(n(),c("div",Qa,[t("div",Wa,[e[40]||(e[40]=t("div",{class:"activity-label"},"CAMPAGNES EMAIL",-1)),t("div",Ka,r(a.stats.emailCampaigns),1)]),e[41]||(e[41]=t("div",{class:"activity-progress-bar"},[t("div",{class:"activity-progress-fill email",style:{width:"85%"}})],-1))])):v("",!0),t("div",Za,[t("div",ti,[e[42]||(e[42]=t("div",{class:"activity-label"},"TAUX DE CONVERSION",-1)),t("div",ei,r(a.stats.conversionRate||0)+"%",1)]),t("div",si,[t("div",{class:"activity-progress-fill conversion",style:_({width:`${Math.min(a.stats.conversionRate||0,100)}%`})},null,4)])])])]),e[44]||(e[44]=p('<div class="overview-card tips-card" data-v-c9cf0808><h3 class="card-title" data-v-c9cf0808>CONSEILS &amp; ASTUCES</h3><div class="tips-list" data-v-c9cf0808><div class="tip-item" data-v-c9cf0808><div class="tip-item-info" data-v-c9cf0808><div class="tip-label" data-v-c9cf0808>PERSONNALISATION</div><div class="tip-description" data-v-c9cf0808>Utilisez {firstName} dans vos messages</div></div><div class="tip-progress-bar" data-v-c9cf0808><div class="tip-progress-fill" style="width:90%;" data-v-c9cf0808></div></div></div><div class="tip-item" data-v-c9cf0808><div class="tip-item-info" data-v-c9cf0808><div class="tip-label" data-v-c9cf0808>ENVOI RAPIDE</div><div class="tip-description" data-v-c9cf0808>Cliquez sur l&#39;ic√¥ne email pour envoi instantan√©</div></div><div class="tip-progress-bar" data-v-c9cf0808><div class="tip-progress-fill" style="width:80%;" data-v-c9cf0808></div></div></div><div class="tip-item" data-v-c9cf0808><div class="tip-item-info" data-v-c9cf0808><div class="tip-label" data-v-c9cf0808>ANALYTICS</div><div class="tip-description" data-v-c9cf0808>Consultez l&#39;onglet pour insights d√©taill√©s</div></div><div class="tip-progress-bar" data-v-c9cf0808><div class="tip-progress-fill" style="width:95%;" data-v-c9cf0808></div></div></div></div></div>',1))])])])])):v("",!0),a.activeTab==="contacts"?(n(),c("div",oi,[a.contacts.length===0&&!a.loading?(n(),c("div",ai,[t("div",ii,[t("div",li,[e[48]||(e[48]=p('<div class="seed-icon" data-v-c9cf0808><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c9cf0808><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-c9cf0808></path></svg></div><h3 class="seed-title" data-v-c9cf0808>Aucun contact trouv√©</h3><p class="seed-description" data-v-c9cf0808> Votre base de donn√©es est vide. Vous pouvez cr√©er des contacts de test pour explorer les fonctionnalit√©s. </p>',3)),t("button",{onClick:e[10]||(e[10]=(...d)=>i.seedContacts&&i.seedContacts(...d)),disabled:a.seeding,class:"seed-btn"},[a.seeding?(n(),c("svg",ci,e[46]||(e[46]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),c("svg",ri,e[47]||(e[47]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)]))),f(" "+r(a.seeding?"Cr√©ation en cours...":"Cr√©er des contacts de test"),1)],8,ni)])])])):v("",!0),S(m,{contacts:a.contacts,loading:a.loading,pagination:a.pagination,filters:a.filters,selectedContacts:a.selectedContacts,onUpdateFilters:i.updateFilters,onLoadContacts:i.loadContacts,onSelectContact:i.toggleContactSelection,onSelectAll:i.toggleSelectAll,onUpdateStatus:i.updateContactStatus,onSendEmail:i.sendMassEmail,onClearSelection:i.clearAllSelection},null,8,["contacts","loading","pagination","filters","selectedContacts","onUpdateFilters","onLoadContacts","onSelectContact","onSelectAll","onUpdateStatus","onSendEmail","onClearSelection"])])):v("",!0),a.activeTab==="analytics"?(n(),c("div",di,[S(l,{analytics:a.analytics,loading:a.loading},null,8,["analytics","loading"])])):v("",!0)])])])])}const hi=A(Ao,[["render",ui],["__scopeId","data-v-c9cf0808"]]);export{hi as default};
