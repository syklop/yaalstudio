import{_ as g,c as r,e as u,a as e,g as v,f,i as c,v as h,j as b,d as p,t as w,P as d,o as a}from"./C50InBbU.js";import{useAuthStore as m}from"./CY8Q5OdD.js";const y={name:"LoginPage",layout:!1,data(){return{form:{email:"",password:""},showPassword:!1,loading:!1,errorMessage:""}},computed:{isFormValid(){return this.form.email&&this.form.password&&this.form.email.includes("@")}},mounted(){m().isLoggedIn&&this.$router.push("/dashboard"),(this._.provides[d]||this.$route).query.email&&(this.form.email=(this._.provides[d]||this.$route).query.email),this.watchError()},methods:{async handleLogin(){this.loading=!0,this.errorMessage="";try{const t=m();console.log("üîê Tentative de connexion admin...");const s=await t.login({email:this.form.email,password:this.form.password});if(s.success){console.log("‚úÖ Connexion r√©ussie, redirection...");const l=(this._.provides[d]||this.$route).query.redirect||"/dashboard";await this.$router.push(l)}else this.errorMessage=s.error||"Erreur de connexion"}catch(t){console.error("‚ùå Erreur login:",t),this.errorMessage="Identifiants incorrects ou erreur de connexion"}finally{this.loading=!1}},watchError(){this.$watch("errorMessage",t=>{t&&setTimeout(()=>{this.errorMessage=""},5e3)})}}},_={class:"login-page"},x={class:"login-container"},M={class:"login-card"},k={class:"form-group"},S=["disabled"],P={class:"form-group"},V={class:"password-input-wrapper"},C=["type","disabled"],E=["disabled"],q={key:0},L={key:1},T={key:0,class:"error-message"},N=["disabled"],A={key:0,class:"loading-content"},B={key:1,class:"button-content"},D={class:"login-footer"};function I(t,s,l,F,o,n){return a(),r("div",_,[s[12]||(s[12]=u('<div class="decorative-bg" data-v-04ee6e90><div class="floating-dot dot-1" data-v-04ee6e90></div><div class="floating-dot dot-2" data-v-04ee6e90></div><div class="floating-dot dot-3" data-v-04ee6e90></div><div class="floating-dot dot-4" data-v-04ee6e90></div><div class="geometric-line line-1" data-v-04ee6e90></div><div class="geometric-line line-2" data-v-04ee6e90></div></div>',1)),e("div",x,[e("div",M,[s[11]||(s[11]=u('<div class="login-header" data-v-04ee6e90><h1 class="login-title" data-v-04ee6e90><span class="title-main" data-v-04ee6e90>YaalStudio</span><span class="title-sub" data-v-04ee6e90>Administration</span></h1><p class="login-subtitle" data-v-04ee6e90> Connectez-vous pour acc√©der au dashboard </p></div>',1)),e("form",{onSubmit:s[3]||(s[3]=v((...i)=>n.handleLogin&&n.handleLogin(...i),["prevent"])),class:"login-form"},[e("div",k,[s[5]||(s[5]=e("label",{for:"email",class:"form-label"},"Email",-1)),c(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=i=>o.form.email=i),type:"email",class:"form-input",placeholder:"admin@yaalstudio.com",required:"",disabled:o.loading,autocomplete:"email"},null,8,S),[[h,o.form.email]])]),e("div",P,[s[6]||(s[6]=e("label",{for:"password",class:"form-label"},"Mot de passe",-1)),e("div",V,[c(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=i=>o.form.password=i),type:o.showPassword?"text":"password",class:"form-input",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",required:"",disabled:o.loading,autocomplete:"current-password"},null,8,C),[[b,o.form.password]]),e("button",{type:"button",class:"password-toggle",onClick:s[2]||(s[2]=i=>o.showPassword=!o.showPassword),disabled:o.loading},[o.showPassword?(a(),r("span",q,"üëÅÔ∏è")):(a(),r("span",L,"üôà"))],8,E)])]),o.errorMessage?(a(),r("div",T,[s[7]||(s[7]=e("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),p(" "+w(o.errorMessage),1)])):f("",!0),e("button",{type:"submit",class:"login-button",disabled:o.loading||!n.isFormValid},[o.loading?(a(),r("span",A,s[8]||(s[8]=[e("span",{class:"loading-spinner"},null,-1),p(" Connexion... ")]))):(a(),r("span",B,s[9]||(s[9]=[e("span",{class:"button-text"},"Se connecter",-1),e("span",{class:"button-arrow"},"‚Üí",-1)])))],8,N)],32),e("div",D,[s[10]||(s[10]=e("p",{class:"footer-text"}," Acc√®s r√©serv√© aux administrateurs YaalStudio ",-1)),e("button",{type:"button",class:"back-link",onClick:s[4]||(s[4]=i=>t.$router.push("/"))}," ‚Üê Retour au site ")])])])])}const Y=g(y,[["render",I],["__scopeId","data-v-04ee6e90"]]);export{Y as default};
