import{_ as p}from"./l_YFoseA.js";import{useAuthStore as b}from"./CY8Q5OdD.js";import{_ as g,c as e,o as i,e as _,a as t,b as u,w as v,t as d,n as r,f as m,K as f,L as k,s as l}from"./C50InBbU.js";const w={name:"DashboardLayout",data(){return{stats:{totalContacts:0,todayContacts:0},loading:!1,error:null}},computed:{selectedContactsCount(){return 0},contactsCount(){return this.stats.totalContacts||0}},async mounted(){try{const a=b();if(a.isInitialized){if(!a.isLoggedIn){await l("/login");return}}else if(!await a.initAuth()){await l("/login");return}await this.loadStats()}catch(a){console.error("❌ Erreur authentification dashboard:",a),await l("/login")}},methods:{async loadStats(){try{const a=b(),s=await $fetch("/api/dashboard/stats",{headers:{Authorization:`Bearer ${a.token}`}});s.success&&(this.stats=s.data)}catch(a){console.error("❌ Erreur chargement stats:",a),a.statusCode===401&&await l("/login")}},async refreshAll(){this.loading=!0;try{await this.loadStats(),this.$emit("refresh")}finally{this.loading=!1}},async handleLogout(){try{this.loading=!0,await b().logout(),await l("/login",{replace:!0}),setTimeout(()=>{window.location.href="/login"},100)}catch(a){console.error("❌ Erreur lors de la déconnexion:",a),window.location.href="/login"}finally{this.loading=!1}},isActiveRoute(a){const s=k();return a==="/dashboard"||a==="/dashboard/overview"?s.path==="/dashboard"||s.path==="/dashboard/overview":s.path.startsWith(a)}}},C={class:"dashboard-layout"},y={class:"dashboard-content"},A={class:"dashboard-header"},x={class:"container"},S={class:"header-content"},M={class:"header-main"},B={class:"header-branding"},H={class:"header-stats"},z={class:"stat-card"},V={class:"stat-content"},j={class:"stat-number"},L={class:"stat-card"},D={class:"stat-content"},R={class:"stat-number"},E={class:"stat-card"},N={class:"stat-content"},I={class:"stat-number"},T={class:"header-actions"},Y={class:"actions-group"},K=["disabled"],W={key:0,class:"action-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},q={key:1,class:"action-icon spinning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},F=["disabled"],G={key:0,class:"logout-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"logout-icon spinning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={class:"logout-text"},P={class:"dashboard-nav"},Q={class:"container"},U={class:"nav-tabs"},X={class:"tab-content"},Z={key:0,class:"tab-badge"},$={class:"dashboard-main"},tt={class:"container"},st={key:0,class:"error-message"};function at(a,s,ot,nt,o,n){const c=p;return i(),e("div",C,[s[17]||(s[17]=_('<div class="twinkling-dots" data-v-94c84c61><div class="dot dot-1" data-v-94c84c61></div><div class="dot dot-2" data-v-94c84c61></div><div class="dot dot-3" data-v-94c84c61></div><div class="dot dot-4" data-v-94c84c61></div><div class="dot dot-5" data-v-94c84c61></div></div>',1)),t("div",y,[t("header",A,[t("div",x,[t("div",S,[t("div",M,[t("div",B,[u(c,{to:"/dashboard",class:"brand-link"},{default:v(()=>s[2]||(s[2]=[t("h1",{class:"dashboard-title blinka-serif"},"YaalStudio",-1),t("span",{class:"dashboard-subtitle"},"Dashboard",-1)])),_:1,__:[2]})]),t("div",H,[t("div",z,[t("div",V,[t("span",j,d(o.stats.totalContacts||0),1),s[3]||(s[3]=t("span",{class:"stat-label"},"Contacts Total",-1))])]),s[6]||(s[6]=t("div",{class:"stat-divider"},null,-1)),t("div",L,[t("div",D,[t("span",R,d(o.stats.todayContacts||0),1),s[4]||(s[4]=t("span",{class:"stat-label"},"Aujourd'hui",-1))])]),s[7]||(s[7]=t("div",{class:"stat-divider"},null,-1)),t("div",E,[t("div",N,[t("span",I,d(n.selectedContactsCount),1),s[5]||(s[5]=t("span",{class:"stat-label"},"Sélectionnés",-1))])])])]),t("div",T,[t("div",Y,[t("button",{onClick:s[0]||(s[0]=(...h)=>n.refreshAll&&n.refreshAll(...h)),class:r(["action-button refresh-btn",{loading:o.loading}]),disabled:o.loading,title:"Actualiser les données"},[o.loading?(i(),e("svg",q,s[9]||(s[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))):(i(),e("svg",W,s[8]||(s[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],10,K),s[12]||(s[12]=_('<div class="user-profile" data-v-94c84c61><div class="user-avatar" data-v-94c84c61><div class="avatar-indicator" data-v-94c84c61></div><span class="avatar-text" data-v-94c84c61>YS</span></div><div class="user-details" data-v-94c84c61><span class="user-name" data-v-94c84c61>Admin</span><span class="user-role" data-v-94c84c61>YaalStudio</span></div></div>',1)),t("button",{onClick:s[1]||(s[1]=(...h)=>n.handleLogout&&n.handleLogout(...h)),class:r(["logout-btn",{loading:o.loading}]),disabled:o.loading,title:"Se déconnecter"},[o.loading?(i(),e("svg",J,s[11]||(s[11]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),e("svg",G,s[10]||(s[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)]))),t("span",O,d(o.loading?"Déconnexion...":"Déconnexion"),1)],10,F)])])])])]),t("div",P,[t("div",Q,[t("nav",U,[u(c,{to:"/dashboard/overview",class:r(["nav-tab",{active:n.isActiveRoute("/dashboard/overview")||n.isActiveRoute("/dashboard")}])},{default:v(()=>s[13]||(s[13]=[t("span",{class:"tab-content"},[t("svg",{class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})]),t("span",{class:"tab-label"},"Vue d'ensemble")],-1)])),_:1,__:[13]},8,["class"]),u(c,{to:"/dashboard/contacts",class:r(["nav-tab",{active:n.isActiveRoute("/dashboard/contacts")}])},{default:v(()=>[t("span",X,[s[14]||(s[14]=t("svg",{class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),s[15]||(s[15]=t("span",{class:"tab-label"},"Contacts & Emails",-1)),n.contactsCount>0?(i(),e("span",Z,d(n.contactsCount),1)):m("",!0)])]),_:1},8,["class"]),u(c,{to:"/dashboard/analytics",class:r(["nav-tab",{active:n.isActiveRoute("/dashboard/analytics")}])},{default:v(()=>s[16]||(s[16]=[t("span",{class:"tab-content"},[t("svg",{class:"tab-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]),t("span",{class:"tab-label"},"Analytics")],-1)])),_:1,__:[16]},8,["class"])])])]),t("main",$,[t("div",tt,[o.error?(i(),e("div",st,d(o.error),1)):m("",!0),f(a.$slots,"default",{},void 0)])])])])}const rt=g(w,[["render",at],["__scopeId","data-v-94c84c61"]]);export{rt as default};
